name: "Send event to PostHog"
description: "Sends an event to PostHog from GitHub Actions"
author: "PostHog"
branding:
  icon: "activity"
  color: "orange"
inputs:
  posthog-token:
    description: 'Your PostHog API token - see project settings section "Project API Key"'
    required: true
  posthog-api-host:
    description: "Your PostHog API host"
    required: false
    default: "https://us.i.posthog.com"
  event:
    description: 'The event name e.g. "GitHubActionCompleted"'
    required: true
    default: "event-from-github-actions"
  properties:
    description: "Properties to add to the event - as a JSON string. Must be possible to `JSON.parse(properties)`"
    required: false
  capture-workflow-duration:
    description: "Capture workflow duration via GitHub API (adds duration_seconds and run metadata)"
    required: false
    default: "false"
  capture-job-duration:
    description: "Capture job duration using pre/post hooks"
    required: false
    default: "false"
  github-token:
    description: "GitHub token for API access (required when capture-workflow-duration is true)"
    required: false
  runner:
    description: "Optional runner name to include in properties (e.g., 'depot')"
    required: false
  job-conclusion:
    description: "Job outcome for filtering (pass ${{ job.status }})"
    required: false
runs:
  using: "node20"
  pre: "dist/pre.js"
  main: "dist/index.js"
  post: "dist/post.js"
